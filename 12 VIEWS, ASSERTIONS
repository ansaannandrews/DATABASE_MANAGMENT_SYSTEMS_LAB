CREATE TABLE Bank2 (
bankcode VARCHAR(3),
bankname VARCHAR(100),
headoffice VARCHAR(100),
branches INT
);
INSERT INTO Bank2 VALUES('SBI', 'State Bank of India', 'Mumbai', 10);
INSERT INTO Bank2 VALUES('ICI', 'ICICI Bank', 'Mumbai', 8);
INSERT INTO Bank2 VALUES('HDF', 'HDFC Bank', 'New Delhi', 6);
INSERT INTO Bank2 VALUES('PNB', 'Punjab National Bank', 'Chandigarh', 7);
INSERT INTO Bank2 VALUES('SBT', 'State Bank of Travancore', 'Ernakulam', 4);
INSERT INTO Bank2 VALUES('CAN', 'Canara Bank', 'Bangalore', 5);

SELECT *
FROM BANK2;

ALTER TABLE Bank2
ADD CONSTRAINT pk_bankcode PRIMARY KEY (bankcode);
ALTER TABLE Bank2
ADD CONSTRAINT chk_bankname_not_null CHECK (bankname IS NOT NULL);
ALTER TABLE Bank2
ADD CONSTRAINT chk_branches_positive CHECK (branches > 0);

CREATE TABLE Branch (
branchid INT,
branchname VARCHAR(100),
bankid VARCHAR(3)
);
INSERT INTO Branch VALUES(1, 'Kottayam', 'SBI');
INSERT INTO Branch VALUES(2, 'Ernakulam', 'ICI');
INSERT INTO Branch VALUES(3, DEFAULT, 'HDF');
INSERT INTO Branch VALUES(4, 'Chandigarh', 'PNB');
INSERT INTO Branch VALUES(5, 'Ernakulam', 'SBT');
INSERT INTO Branch VALUES(6, 'Bangalore', 'CAN');

SELECT *
FROM BRANCH;

ALTER TABLE BRANCH
ADD CONSTRAINT pbranchid PRIMARY KEY(branchid);
ALTER TABLE BRANCH
MODIFY branchname VARCHAR(100) DEFAULT 'New Delhi';
ALTER TABLE BRANCH
ADD CONSTRAINT fbankid FOREIGN KEY(bankid) REFERENCES BANK2(bankcode);

CREATE VIEW BANK_HEAD AS
SELECT *
FROM BANK2
WHERE headoffice='Ernakulam';

CREATE VIEW bank_branch AS
SELECT b.*
FROM Bank2 b
JOIN Branch br ON b.bankcode = br.bankid
WHERE br.branchname = 'Kottayam';


